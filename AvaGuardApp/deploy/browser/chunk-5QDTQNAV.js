import{a as ee}from"./chunk-XHQDKVUV.js";import{$ as R,A as d,Aa as Z,C,Ca as $,E,J as m,L as _,M as b,N as M,O as A,S as k,T as N,U as O,W as D,ba as W,da as V,ga as P,h as T,i as j,ia as U,j as g,k as w,l as u,la as z,m as S,ma as B,na as H,oa as q,pa as G,r as x,ra as J,s as c,sa as K,t as p,u as v,v as h,va as Q,wa as X,xa as Y,y as a,z as o,za as L}from"./chunk-YTAQRA7X.js";var ie=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=u({type:e,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(n,r){n&1&&(a(0,"div",0)(1,"div",1),d(2,"router-outlet"),o()())},dependencies:[Q],encapsulation:2});let t=e;return t})();var I=(()=>{let e=class e{constructor(i,n){this.router=i,this.http=n}get observationValue(){return""}getChartList(){let i=[];return i.push({key:1,value:"Summary-Table"}),i.push({key:2,value:"Summary-Bar-By-Area"}),i.push({key:3,value:"Summary-Map"}),i.push({key:4,value:"Others"}),i.push({key:5,value:"Another Map"}),i}getSummary1(i,n,r){return console.clear(),console.log("In summary service-> getSummary1",i,n),this.http.get(`${Z.apiUrl}/summary1?daysold=${i}&mainArea=${n}&chartnum=${r}`,{responseType:"blob"})}};e.\u0275fac=function(n){return new(n||e)(w(X),w(D))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var re=(()=>{let e=class e{constructor(i){this.summaryService=i}ngOnInit(){}};e.\u0275fac=function(n){return new(n||e)(p(I))},e.\u0275cmp=u({type:e,selectors:[["ng-component"]],decls:27,vars:0,consts:[[1,"table","table-striped"],[2,"width","10%"],[2,"width","80%"],[2,"white-space","nowrap"],["routerLink","summary1",1,"btn","btn-sm","btn-primary","me-1"],["routerLink","summary2",1,"btn","btn-sm","btn-primary","me-1"]],template:function(n,r){n&1&&(a(0,"h1"),m(1,"Summary"),o(),a(2,"table",0)(3,"thead")(4,"tr")(5,"th",1),m(6,"#"),o(),a(7,"th",2),m(8,"Summary Name"),o(),d(9,"th",1),o()(),a(10,"tbody")(11,"tr")(12,"td"),m(13,"1."),o(),a(14,"td"),m(15,"Avalanche stats (summarized by area)"),o(),a(16,"td",3)(17,"a",4),m(18,"View"),o()()(),a(19,"tr")(20,"td"),m(21,"2."),o(),a(22,"td"),m(23,"Future Report (Not implemented yet)"),o(),a(24,"td",3)(25,"a",5),m(26,"View"),o()()()()())},dependencies:[Y],encapsulation:2});let t=e;return t})();function ae(t,e){if(t&1&&(a(0,"option",9),m(1),o()),t&2){let y=e.$implicit;E("value",y),c(),_(" ",y," ")}}function me(t,e){if(t&1&&(a(0,"option",9),m(1),o()),t&2){let y=e.$implicit;E("value",y.key),c(),_(" ",y.value," ")}}function se(t,e){t&1&&d(0,"span",10)}var F=(()=>{let e=class e{constructor(i,n,r,s){this.summaryService=i,this.alertService=n,this.locationService=r,this.sanitizer=s,this.imgPath=null,this.loading=!1,this.daysold=3e3,this.selectedMainArea="Alps",this.selectedChart=1}ngOnInit(){this.mainAreaArray=this.locationService.getMainAreas(),this.chartList=this.summaryService.getChartList(),this.loading=!1,console.clear(),console.log("in summary1 component-> before calling service"),this.getImageFromService()}getImageFromService(){this.loading=!0,this.daysold||(this.daysold=1e4),this.summaryService.getSummary1(this.daysold,this.selectedMainArea,this.selectedChart).pipe(T()).subscribe({next:i=>{console.log("called image service, returned url=",i);var n=new FileReader,r,s;n.readAsDataURL(i),n.onloadend=()=>{r=n.result,console.log("in reader function base64=",r),console.log("blob=",i),s=this.sanitizer.bypassSecurityTrustUrl(""+r),console.log("objectURL=",s),this.imgPath=s,this.loading=!1}},error:i=>{this.alertService.error(i),this.loading=!1,console.log("in summary1 component-> errored in the service")}})}onMainAreaChange(){}};e.\u0275fac=function(n){return new(n||e)(p(I),p($),p(ee),p(R))},e.\u0275cmp=u({type:e,selectors:[["ng-component"]],decls:19,vars:8,consts:[[1,"card"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],["type","number","id","daysold","min","0","max","99999","aria-label","daysold","aria-describedby","basic-addon1",3,"ngModelChange","ngModel"],[3,"change","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[3,"src"],[3,"value"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(n,r){n&1&&(a(0,"div",0)(1,"h3"),m(2,"Summary of Avalanche Observations by Area"),o(),a(3,"div",1)(4,"span",2),m(5,"Days Old:"),o(),a(6,"input",3),A("ngModelChange",function(l){return M(r.daysold,l)||(r.daysold=l),l}),o(),a(7,"span",2),m(8,"Main Area:"),o(),a(9,"select",4),C("change",function(){return r.onMainAreaChange()}),A("ngModelChange",function(l){return M(r.selectedMainArea,l)||(r.selectedMainArea=l),l}),v(10,ae,2,2,"option",5),o(),a(11,"span",2),m(12,"Chart Type:"),o(),a(13,"select",4),C("change",function(){return r.onMainAreaChange()}),A("ngModelChange",function(l){return M(r.selectedChart,l)||(r.selectedChart=l),l}),v(14,me,2,2,"option",5),o()(),a(15,"button",6),C("click",function(){return r.getImageFromService()}),v(16,se,1,0,"span",7),m(17," Run "),o(),d(18,"img",8),o()),n&2&&(c(6),b("ngModel",r.daysold),c(3),b("ngModel",r.selectedMainArea),c(),h("ngForOf",r.mainAreaArray),c(3),b("ngModel",r.selectedChart),c(),h("ngForOf",r.chartList),c(),h("disabled",r.loading),c(),h("ngIf",r.loading),c(2),h("src",r.imgPath,x))},dependencies:[k,N,B,H,W,U,z,V,G,q,P],encapsulation:2});let t=e;return t})();var le=[{path:"",component:ie,children:[{path:"",component:re},{path:"summary1",component:F},{path:"summary2",component:F}]}],oe=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=S({type:e}),e.\u0275inj=g({imports:[L.forChild(le),L]});let t=e;return t})();var De=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=S({type:e}),e.\u0275inj=g({imports:[O,K,oe,J]});let t=e;return t})();export{De as SummaryModule};
