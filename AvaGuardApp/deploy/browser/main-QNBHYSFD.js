import{a as ee}from"./chunk-WC47VQVE.js";import{a as c}from"./chunk-SRH65J3K.js";import{A as b,Aa as j,B as E,Ba as S,C as O,Ca as q,D as g,J as a,L as w,P as J,Q as V,R as $,S as W,T as z,X as _,Y as B,Z as G,_ as K,e as U,g as P,i as v,j as x,k as m,l as h,m as I,n as C,o as A,q as H,s as l,sa as Y,t as p,ta as Q,u as T,v as f,va as X,wa as M,x as D,xa as N,y as o,ya as Z,z as s,za as F}from"./chunk-YTAQRA7X.js";var te=(()=>{let e=class e{constructor(r){this.accountService=r,this.user=this.accountService.userValue}};e.\u0275fac=function(t){return new(t||e)(p(c))},e.\u0275cmp=h({type:e,selectors:[["ng-component"]],decls:9,vars:1,consts:[[1,"p-4"],[1,"container"],["routerLink","/observations"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),a(3),s(),o(4,"p"),a(5,"You're logged in to Avalanche Guard Web Application!!"),s(),o(6,"p")(7,"a",2),a(8,"Manage Observations"),s()()()()),t&2&&(l(3),w("Hi ",n.user==null?null:n.user.firstName,"!"))},dependencies:[N],encapsulation:2});let i=e;return i})();var y=(()=>{let e=class e{constructor(r,t){this.router=r,this.accountService=t}canActivate(r,t){return this.accountService.userValue?!0:(this.router.navigate(["/account/login"],{queryParams:{returnUrl:t.url}}),!1)}};e.\u0275fac=function(t){return new(t||e)(m(M),m(c))},e.\u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var re=(()=>{let e=class e{constructor(r){this.accountService=r}intercept(r,t){return t.handle(r).pipe(P(n=>{[401,403].includes(n.status)&&this.accountService.userValue&&this.accountService.logout();let k=n.error?.message||n.statusText;return console.error(n),U(()=>k)}))}};e.\u0275fac=function(t){return new(t||e)(m(c))},e.\u0275prov=v({token:e,factory:e.\u0275fac});let i=e;return i})();var ie=(()=>{let e=class e{constructor(r){this.accountService=r}intercept(r,t){let n=this.accountService.userValue,k=localStorage.getItem("token"),ce=k,ue=r.url.startsWith(j.apiUrl);return ce&&ue&&(r=r.clone({setHeaders:{Authorization:`Bearer ${k}`}})),t.handle(r)}};e.\u0275fac=function(t){return new(t||e)(m(c))},e.\u0275prov=v({token:e,factory:e.\u0275fac});let i=e;return i})();var le="avalancheguard-users",je=JSON.parse(localStorage.getItem(le))||[],me="avalancheguard-observations",Le=JSON.parse(localStorage.getItem(me))||[];var pe=()=>import("./chunk-S4QUIDI7.js").then(i=>i.AccountModule),fe=()=>import("./chunk-TYHFPVW3.js").then(i=>i.UsersModule),de=()=>import("./chunk-EHE2CFYC.js").then(i=>i.ObservationsModule),ve=()=>import("./chunk-5QDTQNAV.js").then(i=>i.SummaryModule),he=[{path:"",component:te,canActivate:[y]},{path:"users",loadChildren:fe,canActivate:[y]},{path:"observations",loadChildren:de,canActivate:[y]},{path:"account",loadChildren:pe},{path:"summary",loadChildren:ve,canActivate:[y]},{path:"**",redirectTo:""}],ne=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=I({type:e}),e.\u0275inj=x({imports:[F.forRoot(he),F]});let i=e;return i})();function be(i,e){if(i&1){let u=E();o(0,"div"),b(1,"span",1),o(2,"button",2),O("click",function(){let t=C(u).$implicit,n=g();return A(n.removeAlert(t))}),s()()}if(i&2){let u=e.$implicit,r=g();D(r.cssClass(u)),l(),f("innerHTML",u.message,H)}}var oe=(()=>{let e=class e{constructor(r,t){this.router=r,this.alertService=t,this.id="default-alert",this.fade=!0,this.alerts=[]}ngOnInit(){this.alertSubscription=this.alertService.onAlert(this.id).subscribe(r=>{if(!r.message){this.alerts=this.alerts.filter(t=>t.keepAfterRouteChange),this.alerts.forEach(t=>delete t.keepAfterRouteChange);return}this.alerts.push(r),r.autoClose&&setTimeout(()=>this.removeAlert(r),3e3)}),this.routeSubscription=this.router.events.subscribe(r=>{r instanceof Q&&this.alertService.clear(this.id)})}ngOnDestroy(){this.alertSubscription.unsubscribe(),this.routeSubscription.unsubscribe()}removeAlert(r){this.alerts.includes(r)&&(this.fade?(r.fade=!0,setTimeout(()=>{this.alerts=this.alerts.filter(t=>t!==r)},250)):this.alerts=this.alerts.filter(t=>t!==r))}cssClass(r){if(!r)return;let t=["alert","alert-dismissible","mt-4","container"],n={[S.Success]:"alert-success",[S.Error]:"alert-danger",[S.Info]:"alert-info",[S.Warning]:"alert-warning"};return r.type!==void 0&&t.push(n[r.type]),r.fade&&t.push("fade"),t.join(" ")}};e.\u0275fac=function(t){return new(t||e)(p(M),p(q))},e.\u0275cmp=h({type:e,selectors:[["alert"]],inputs:{id:"id",fade:"fade"},decls:1,vars:1,consts:[[3,"class",4,"ngFor","ngForOf"],[3,"innerHTML"],[1,"btn-close",3,"click"]],template:function(t,n){t&1&&T(0,be,3,4,"div",0),t&2&&f("ngForOf",n.alerts)},dependencies:[W],encapsulation:2});let i=e;return i})();var ye=i=>({"bg-light":i}),ke=()=>({exact:!0});function xe(i,e){if(i&1){let u=E();o(0,"nav",2)(1,"div",3)(2,"a",4),a(3,"Home"),s(),o(4,"a",5),a(5,"Users"),s(),o(6,"a",6),a(7,"Observations"),s(),o(8,"a",7),a(9,"Summary"),s(),o(10,"a",8),a(11,"Info"),s(),o(12,"button",9),O("click",function(){C(u);let t=g();return A(t.logout())}),a(13,"Logout"),s(),o(14,"a",10),a(15),s()(),o(16,"div",11)(17,"a",12),b(18,"img",13),s()()()}if(i&2){let u=g();l(2),f("routerLinkActiveOptions",J(2,ke)),l(13),w("Logged In: ",u.user.username," ")}}var se=(()=>{let e=class e{constructor(r){this.accountService=r,this.accountService.user.subscribe(t=>this.user=t)}logout(){this.accountService.logout()}};e.\u0275fac=function(t){return new(t||e)(p(c))},e.\u0275cmp=h({type:e,selectors:[["app-root"]],decls:4,vars:4,consts:[["class","navbar navbar-expand navbar-dark bg-dark px-3 me-auto mb-2 mb-lg-0",4,"ngIf"],[1,"app-container",3,"ngClass"],[1,"navbar","navbar-expand","navbar-dark","bg-dark","px-3","me-auto","mb-2","mb-lg-0"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],["routerLink","/","routerLinkActive","active",1,"nav-item","nav-link",3,"routerLinkActiveOptions"],["routerLink","/users","routerLinkActive","active",1,"nav-item","nav-link"],["routerLink","/observations","routerLinkActive","active",1,"nav-item","nav-link"],["routerLink","/summary","routerLinkActive","active",1,"nav-item","nav-link"],["routerLink","/info","routerLinkActive","active",1,"nav-item","nav-link"],[1,"btn","btn-link","nav-item","nav-link",3,"click"],[1,"nav-item"],[1,"m-0","order-0","order-md-1","position-absolute","main-logo"],["href","/home",1,"navbar-brand"],["src","../assets/images/avaguardlogo01.png","width","55px",1,"rounded-circle"]],template:function(t,n){t&1&&(T(0,xe,19,3,"nav",0),o(1,"div",1),b(2,"alert")(3,"router-outlet"),s()),t&2&&(f("ngIf",n.user),l(),f("ngClass",V(2,ye,n.user)))},dependencies:[$,z,X,N,Z,oe],encapsulation:2});let i=e;return i})();var ae=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=I({type:e,bootstrap:[se]}),e.\u0275inj=x({providers:[{provide:_,useClass:ie,multi:!0},{provide:_,useClass:re,multi:!0}],imports:[K,Y,B,ne,ee]});let i=e;return i})();j.production&&void 0;G().bootstrapModule(ae).catch(i=>console.error(i));
